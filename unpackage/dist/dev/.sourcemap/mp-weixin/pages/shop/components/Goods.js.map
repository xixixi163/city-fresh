{"version":3,"sources":["webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?86e9","webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?eec8","webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?0102","webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?fe8b","uni-app:///pages/shop/components/Goods.vue","webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?fa7e","webpack:///E:/HbuiderX_project/city-fresh/pages/shop/components/Goods.vue?0d06"],"names":[],"mappings":"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CA,WADA,mBACA,KADA,EACA;AACA;AACA,KAHA,EAnMA;;AAwMA;AACA;AACA,cAFA,wBAEA;AACA;AACA;AACA;AACA;AACA;AACA,KARA;AASA;AACA,YAVA,sBAUA;AACA;AACA,KAZA;AAaA;AACA,WAdA,qBAcA;AACA;AACA,yDADA;AAEA,KAjBA;AAkBA;AACA,QAnBA,kBAmBA;AACA;AACA;AACA,KAtBA,EAxMA;;AAgOA;AACA;AACA,aAFA,qBAEA,QAFA,EAEA,QAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAtCA;AAuCA,iBAvCA,yBAuCA,QAvCA,EAuCA,QAvCA,EAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9CA,EAhOA,E;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAmwC,CAAgB,iuCAAG,EAAC,C;;;;;;;;;;;ACAvxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/shop/components/Goods.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Goods.vue?vue&type=template&id=5bb53b4d&scoped=true&\"\nvar renderjs\nimport script from \"./Goods.vue?vue&type=script&lang=js&\"\nexport * from \"./Goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Goods.vue?vue&type=style&index=0&id=5bb53b4d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bb53b4d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/components/Goods.vue\"\nexport default component.exports","export * from \"-!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Goods.vue?vue&type=template&id=5bb53b4d&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"toFloat\")(_vm.reArrPrice)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, item, index) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item,\n        index = _temp2.index\n\n      var _temp, _temp2\n\n      item.amount > 0 &&\n        _vm.reduce(\n          item.amount,\n          item._id,\n          index,\n          item.objdis.Discount,\n          item.objdis.input,\n          item.objdis.image\n        )\n    }\n\n    _vm.e1 = function($event, item, index) {\n      var _temp3 = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp4 = _temp3.eventParams || _temp3[\"event-params\"],\n        item = _temp4.item,\n        index = _temp4.index\n\n      var _temp3, _temp4\n\n      item.amount < item.stock &&\n        _vm.plus(\n          item.amount,\n          item._id,\n          index,\n          item.objdis.Discount,\n          item.objdis.input,\n          item.objdis.image\n        )\n    }\n\n    _vm.e2 = function($event) {\n      _vm.flag && _vm.settlement()\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Goods.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"goods-show\">\r\n\t\t\t<!-- 左边tab -->\r\n\t\t\t\t<view class=\"goods-tabs\">\r\n\t\t\t\t\t<block v-for=\"(item, index) in tabList\" :key=\"index\">\r\n\t\t\t\t\t\t<text class=\"tab-text\" :class=\"{active:index === num}\" @click=\"tabClick(item,index)\">{{item}}</text>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 右边商品 -->\r\n\t\t\t\t<view class=\"goods\">\r\n\t\t\t\t\t<text class=\"sort-name\">{{sortName}}</text>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in nowGoods\" :key=\"index\">\r\n\t\t\t\t\t\t\t<!-- 上架状态显示 -->\r\n\t\t\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t\t\t<view class=\"content-img\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.objdis.image\" mode=\"widthFix\" @click='clickImg(item.objdis.image)'></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"content-text\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"con-name\">{{item.objdis.input}}</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"con-label\">\r\n\t\t\t\t\t\t\t\t\t\t<block v-for=\"(item,index) in item.objdis.tags\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{item}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"con-sale\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{`月售${item.sales}`}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text>{{`库存${item.stock}`}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"con-price\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"now-price\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.objdis.Discount}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"pre-price\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.objdis.Price}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"goods-num\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image src=\"../../../static/coen/jianhao.png\" mode=\"widthFix\" @click=\"item.amount > 0 && reduce(item.amount,item._id,index,item.objdis.Discount,item.objdis.input,item.objdis.image)\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"amount\">{{item.amount}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 数量小于库存时可选 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<image src=\"../../../static/coen/jiahao.png\" mode=\"\" @click=\"(item.amount<item.stock) && plus(item.amount,item._id,index,item.objdis.Discount,item.objdis.input,item.objdis.image)\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 总价计算 -->\r\n\t\t\t\t<view class=\"calc-price\">\r\n\t\t\t\t\t<!-- 骑手图片 -->\r\n\t\t\t\t\t<view class=\"rider\">\r\n\t\t\t\t\t\t<image v-show=\"!isActive\" src=\"../../../static/coen/wei.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<image v-show=\"isActive\" src=\"../../../static/coen/yi.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 件数 -->\r\n\t\t\t\t\t<view class=\"number\" v-show=\"isActive\">\r\n\t\t\t\t\t\t{{arrPrice.length}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 金额 -->\r\n\t\t\t\t\t<view class=\"amount-detail\">\r\n\t\t\t\t\t\t<view class=\"detail-left\">\r\n\t\t\t\t\t\t\t<view class=\"cost-amount\">\r\n\t\t\t\t\t\t\t\t<text class=\"total-amount\">{{reArrPrice | toFloat}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"delivery\">{{`另需配送费${physical}元`}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"detail-right\" :class=\"{'dis-active': isActive}\" @click=\"flag && settlement()\">\r\n\t\t\t\t\t\t\t<text v-show=\"!isActive\">{{`${delivering}元起送`}}</text>\r\n\t\t\t\t\t\t\t<text v-show=\"isActive\" >{{diffMon}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t</view>\r\n\t\t<modal ref = 'modal'></modal>\r\n\t</view>\n</template>\n  \n<script>\r\n\timport Modal from '../../../components/Modal.vue'\r\n\tconst {log} = console;\r\n\texport default {\r\n\t\tname:'Goods',\r\n\t\tcomponents:{\r\n\t\t\tModal\r\n\t\t},\r\n\t\tprops:{\r\n\t\t\tgoodsData:Array,\r\n\t\t\tbusiIntroData:Object\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t\r\n\t\t\t\t// 右边分类名字\r\n\t\t\t\tsortName:'',\r\n\t\t\t\t// 商品类别\r\n\t\t\t\ttabList:[],\t\r\n\t\t\t\tnum:0,\r\n\t\t\t\t// 是否已选\r\n\t\t\t\t// isActive:false,\r\n\t\t\t\t// 总价\r\n\t\t\t\ttotalAmount: '',\r\n\t\t\t\t// 配送费\r\n\t\t\t\tphysical: Number,\r\n\t\t\t\t// 起送价\r\n\t\t\t\tdelivering: Number,\r\n\t\t\t\t// 还差几元\r\n\t\t\t\t// diffMon: 0.8,\r\n\t\t\t\t// 当前分类goods\r\n\t\t\t\tnowGoods:[],\r\n\t\t\t\t// 分类商品详细\r\n\t\t\t\t// sortGoods:{}\r\n\t\t\t\t// 商品件数加减\r\n\t\t\t\tamount:0,\r\n\t\t\t\t// 选择商品的信息价格\r\n\t\t\t\tarrPrice:[],\r\n\t\t\t\t// 标记是否已结算\r\n\t\t\t\t// flag:false\r\n\t\t\t\t// 商家标识\r\n\t\t\t\tmerchantId:'',\r\n\t\t\t\t// 商家图片\r\n\t\t\t\tmerchantLogo:'',\r\n\t\t\t\t// 商家名称\r\n\t\t\t\tmerchantName:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 点击图片方法\r\n\t\t\tclickImg(imgUrl){\r\n\t\t\t\t  wx.previewImage({\r\n\t\t\t\t    urls: [imgUrl], //需要预览的图片http链接列表，注意是数组\r\n\t\t\t\t    current: '', // 当前显示图片的http链接，默认是第一个\r\n\t\t\t\t    success: function (res) { },\r\n\t\t\t\t    fail: function (res) { },\r\n\t\t\t\t    complete: function (res) { },\r\n\t\t\t\t  })\r\n\t\t\t},\r\n\t\t\t// 过滤数值\r\n\t\t\tchangeFloat(num){\r\n\t\t\t\treturn parseFloat(Number(num).toFixed(10));\r\n\t\t\t},\r\n\t\t\ttabClick(item,index) {\r\n\t\t\t\t// 更改样式\r\n\t\t\t\tthis.num = index;\r\n\t\t\t\t// 切换显示的商品 方式一\r\n\t\t\t\tthis.sortName = item;\r\n\t\t\t\t// this.nowGoods = this.sortGoods[item];\r\n\t\t\t\t// 方式二\r\n\t\t\t\tthis.nowGoods = this.goodsData.filter(goods=>item===goods.optidata)\r\n\t\t\t},\r\n\t\t\t// 加件数\r\n\t\t\tplus(amounts,id,index,discount,name,image) {\r\n\t\t\t\tthis.amount = Number(amounts)+Number(1);\r\n\t\t\t\tthis.changeAmount(amounts,id,index,discount,name,image);\r\n\t\t\t},\r\n\t\t\t// 减件数\r\n\t\t\treduce(amounts,id,index,discount,name,image) {\r\n\t\t\t\tthis.amount = Number(amounts)-Number(1);\r\n\t\t\t\tthis.changeAmount(amounts,id,index,discount,name,image);\r\n\t\t\t},\r\n\t\t\t// 加减公用 \r\n\t\t\tchangeAmount(amounts,id,index,discount,name,image) {\r\n\t\t\t\tconsole.log(id);\r\n\t\t\t\tlet findarr=this.nowGoods.filter(item=>{\r\n\t\t\t\t\t// 修改amount\r\n\t\t\t\t\tif(item._id===id){\r\n\t\t\t\t\t\titem.amount = this.amount<1?'0':this.amount\r\n\t\t\t\t\t\treturn item.amount;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(findarr);\r\n\t\t\t\t// 更改到nowGoods 顺序保持不变\r\n\t\t\t\tthis.nowGoods[index] = findarr[0];\r\n\t\t\t\t\r\n\t\t\t\tlet totalNum = Number(discount)*Number(findarr[0].amount);\r\n\t\t\t\t// 解决总价为浮点数\r\n\t\t\t\tlet totalPrice = parseFloat(totalNum.toFixed(10));\r\n\t\t\t\t\r\n\t\t\t\tlet choosed = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\timage,\r\n\t\t\t\t\ttotalPrice,\r\n\t\t\t\t\t\"amount\":findarr[0].amount,\r\n\t\t\t\t\tdiscount\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 放入总价数组 不足，没点击一次就要加入一次，数组不断扩大\r\n\t\t\t\tthis.arrPrice.push(choosed);\r\n\t\t\t\t\r\n\t\t\t\t// 点击同一个商品，则商品信息，总价等要一致\r\n\t\t\t\tlet arrTotal=this.arrPrice.map(item=>id===item.id?choosed:item)\r\n\t\t\t\tthis.arrPrice = arrTotal;//虽然map返回新数组，但是最好赋值一下，避免个别浏览器问题\t\r\n\t\t\t\t\r\n\t\t\t\t// console.log(this.arrPrice);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// 解决数组不断增大push 以下有点麻烦 ,直接获取到被选的商品，不重复\r\n\t\t\t\t// this.arrPrice需要先给一个空对象，否则不能进入数组\r\n\t\t\t\t// 计算属性中，需要过滤总价为0的情况，并且需要不值再赋给arrPrice\r\n\t\t\t\t// 当都为0时，数组为空了，进入不了循环的问题未解决\r\n\t\t\t\t\r\n\t\t\t\t// this.arrPrice.forEach((item,index)=>{\r\n\t\t\t\t// \t// 不改变原数组，所以初始为空，则一直为空\r\n\t\t\t\t// \tif(JSON.stringify(item) == '{}'){\r\n\t\t\t\t// \t\tconsole.log(\"11\");\r\n\t\t\t\t// \t\tthis.arrPrice[index] = choosed;\r\n\t\t\t\t// \t}\r\n\t\t\t\t// \telse if(item.id===id){\r\n\t\t\t\t// \t\tthis.arrPrice[index] = choosed;\r\n\t\t\t\t// \t}else{\r\n\t\t\t\t// \t\tif((index+1)==this.arrPrice.length){\r\n\t\t\t\t// \t\t\tthis.arrPrice.push(choosed);\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t\t// console.log(this.arrPrice);\r\n\t\t\t\t\r\n\t\t\t\t// // 如果总价为0 则过滤\r\n\t\t\t\t// this.arrPrice = this.arrPrice.filter(item=>item.totalPrice!=0);\r\n\t\t\t},\r\n\t\t\t// 处理已选商品数组,数组改变及时响应，在computed调用\r\n\t\t\tfilterArr() {\r\n\t\t\t\t// 商品总价信息对象去重\r\n\t\t\t\tlet arr = {};\r\n\t\t\t\tlet arrList = this.arrPrice.reduce((preVal,curVal)=>{\r\n\t\t\t\t\tarr[curVal.id]?'':arr[curVal.id]=true&&preVal.push(curVal);\r\n\t\t\t\t\treturn preVal;\r\n\t\t\t\t},[])\r\n\t\t\t\t\t\r\n\t\t\t\t// 如果总价为0 则过滤\r\n\t\t\t\tlet arrAll = arrList.filter(item=>item.totalPrice!=0);\r\n\t\t\t\t// console.log(arrAll);\r\n\t\t\t\tthis.arrPrice = arrAll;\r\n\t\t\t},\r\n\t\t\t// 点击去结算 判断是否登录\r\n\t\t\tsettlement(){\r\n\t\t\t\t// 有登录才可以结算\r\n\t\t\t\tconst infos = uni.getStorageSync('userInfo');\r\n\t\t\t\tif(!infos) {\r\n\t\t\t\t\t// this.$refs.modal.isModal = true;\r\n\t\t\t\t\t// 可调用方法\r\n\t\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\t\tthis.$refs.modal.init();\r\n\t\t\t\t\t})\r\n\t\t\t\t}else {\r\n\t\t\t\t\tlog('已登录，进行支付');\r\n\t\t\t\t\t// 传递到订单页面的参数\r\n\t\t\t\t\t// 支付金额\r\n\t\t\t\t\t// 配送费\r\n\t\t\t\t\t// 用户id\r\n\t\t\t\t\t// 商家标识\r\n\t\t\t\t\t// 商家名称\r\n\t\t\t\t\t// 商家logo\r\n\t\t\t\t\t// 点的商品个数\r\n\t\t\t\t\tlet payment = this.changeFloat(this.reArrPrice+this.physical);\r\n\t\t\t\t\tconst orderDetail = {\r\n\t\t\t\t\t\tpayment,\r\n\t\t\t\t\t\tphysical:this.physical,\r\n\t\t\t\t\t\topenid:infos.openid,\r\n\t\t\t\t\t\tmerchantId:this.merchantId,\r\n\t\t\t\t\t\tmerchantName:this.merchantName,\r\n\t\t\t\t\t\tmerchantLogo:this.merchantLogo,\r\n\t\t\t\t\t\tgoods:this.arrPrice\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 路径带数据不能带对象，数组，只能字符串\r\n\t\t\t\t\t// 跳转到订单页面\r\n\t\t\t\t\tconst orderstr = JSON.stringify(orderDetail);\r\n\t\t\t\t\tlog(orderstr);\r\n\t\t\t\t\twx.navigateTo({\r\n\t\t\t\t\t\turl:\"../placeorder/placeorder?ide=\"+orderstr\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\ttoFloat(price){\r\n\t\t\t\treturn parseFloat(price.toFixed(10));\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t// 计算总价\r\n\t\t\treArrPrice(){\r\n\t\t\t\t// 处理已选商品数组\r\n\t\t\t\tthis.filterArr();\r\n\t\t\t\t// 计算总价\r\n\t\t\t\tlet allPrice = this.arrPrice.reduce((preTotal,curVal)=>preTotal+=curVal.totalPrice,0);\r\n\t\t\t\treturn allPrice;\r\n\t\t\t},\r\n\t\t\t// 切换是否有商品的样式\r\n\t\t\tisActive(){\r\n\t\t\t\treturn this.reArrPrice>0?true:false;\r\n\t\t\t},\r\n\t\t\t// 还差几元，配送，结算\r\n\t\t\tdiffMon(){\r\n\t\t\t\treturn this.reArrPrice < this.delivering ?　\r\n\t\t\t\t\t`还差${this.changeFloat(this.delivering-this.reArrPrice)}元`:`去结算`;\r\n\t\t\t},\r\n\t\t\t// 标记是否已结算\r\n\t\t\tflag(){\r\n\t\t\t\t// 0元起送的时候，需要加总价>0，否则可以点击去支付\r\n\t\t\t\treturn this.diffMon === '去结算' && this.reArrPrice > 0? true : false;\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t// 用户进入该页面：1、默认显示第一个分类的商品。\r\n\t\t\tgoodsData(newValue,oldValue){\r\n\t\t\t\t// 取出无重复的商品分类\r\n\t\t\t\tlet goodsClassic = [...new Set(newValue.map(item=>item.optidata))];\r\n\t\t\t\tthis.tabList = goodsClassic;\r\n\t\t\t\tthis.sortName = goodsClassic[0];\r\n\t\t\t\t// 往商品里添加一个数量字段\r\n\t\t\t\tlet key = 'amount';\r\n\t\t\t\tlet value = 0;\r\n\t\t\t\tlet goodsAddAmount = newValue.map(item=>item[key]=value);\r\n\t\t\t\tconsole.log(newValue);\r\n\t\t\t\t\r\n\t\t\t\t// 右边的商品 方式一\r\n\t\t\t\t// 存储分类的商品\r\n\t\t\t\t// let goodsDetail = goodsClassic.map(item=>{\r\n\t\t\t\t// \tnewValue.map(goods=>{\r\n\t\t\t\t// \t\tif(item === goods.optidata){\t\r\n\t\t\t\t// \t\t\tif(this.sortGoods[goods.optidata]){\r\n\t\t\t\t// \t\t\t\tthis.sortGoods[goods.optidata].push(goods);\r\n\t\t\t\t// \t\t\t}else{\r\n\t\t\t\t// \t\t\t\tlet key = item;\r\n\t\t\t\t// \t\t\t\tthis.sortGoods[key] = [goods];\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t})\r\n\t\t\t\t// })\r\n\t\t\t\t// // 当前goods\r\n\t\t\t\t// // console.log(this.sortGoods);\r\n\t\t\t\t// this.nowGoods = this.sortGoods[this.sortName];\r\n\t\t\t\t\r\n\t\t\t\t// 右边的商品 方式二\r\n\t\t\t\tthis.nowGoods = newValue.filter(goods=>this.sortName===goods.optidata)\r\n\t\t\t\tconsole.log(this.nowGoods);\r\n\r\n\t\t\t\t// 访问对象中元素\r\n\t\t\t\t// let test = {a:1,b:2}\r\n\t\t\t\t// console.log(test['a']);\r\n\t\t\t},\r\n\t\t\tbusiIntroData(newValue,oldValue) {\r\n\t\t\t\t// log(newValue);\r\n\t\t\t\tthis.physical = newValue.physical;\r\n\t\t\t\tthis.delivering = newValue.delivering;\r\n\t\t\t\tthis.merchantId = newValue.openid;\r\n\t\t\t\tthis.merchantLogo = newValue.logo;\r\n\t\t\t\tthis.merchantName = newValue.shop;\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t.stop-cli {\r\n\t\tpointer-events: none;\r\n\t}\r\n\t.goods-show {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t/* 左边分类tab */\r\n\t.goods-tabs {\r\n\t\twidth: 190upx;\r\n\t\theight: 100%;\r\n\t\toverflow-y: auto;\r\n\t\tbackground: #fafafa;\r\n\t}\r\n\t.goods-tabs text {\r\n\t\tdisplay: block;\r\n\t\theight: 80upx;\r\n\t\tline-height: 80upx;\r\n\t\tfont-size: 28upx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #a8a8a8;\r\n\t\t\r\n\t\ttext-overflow: ellipsis ;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t.active {\r\n\t\tbackground: #FFFFFF;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\t/* 右边商品 */\r\n\t.goods {\r\n\t\twidth: 100%;\r\n\t\tpadding: 9upx 9upx 130upx 9upx;\r\n\t\toverflow: hidden;\r\n\t\toverflow-y: auto;\r\n\t\t\r\n\t\tbackground: #fff;\r\n\t}\r\n\t.sort-name {\r\n\t\theight: 60upx;\r\n\t\tline-height: 80upx;\r\n\t\t\r\n\t\tfont-size: 28upx;\r\n\t}\r\n\t.goods .content {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 200upx;\r\n\t\tmargin: 30upx 0;\r\n\t\tcolor: #898989;\r\n\t}\r\n\t.content-img {\r\n\t\twidth: 180upx;\r\n\t\theight: 200upx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.content-img image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 10upx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.content-text {\r\n\t\tpadding-left: 10upx;\r\n\t\tfont-size: 24upx;\r\n\t}\r\n\t/* 商品名 */\r\n\t .con-name {\r\n\t\t height: 50upx;\r\n\t\t line-height: 50upx;\r\n\t\t \r\n\t\t display: -webkit-box; /* 弹性布局的兼容写法 */\r\n\t\t -webkit-box-orient: vertical; /* 子元素的排列方式 垂直 */\r\n\t\t -webkit-line-clamp: 1; /* 规定显示文本的行数 */\r\n\t\t overflow: hidden; /* 多余部分隐藏 */\r\n\t\t text-hidden: ellipsis; /* ...表示显 */\r\n\t\t \r\n\t\t font-size: 33upx;\r\n\t\t font-weight: 700;\r\n\t }\r\n\t /* 商品标签 */\r\n\t .con-label {\r\n\t\t display: flex;\r\n\t }\r\n\t .con-label text {\r\n\t\t display: block;\r\n\t\t margin-right: 9upx;\r\n\t\t padding: 4upx 13upx;\r\n\t\t border-radius: 7upx;\r\n\t\t background: #f1f1f1;\r\n\t }\r\n\t /*  月销 */\r\n\t .con-sale {\r\n\t\t height: 50upx;\r\n\t\t line-height: 50upx;\t \r\n\t }\r\n\t .con-sale text {\r\n\t\t padding-right: 20upx;\r\n\t }\r\n\t /* 价格 */\r\n\t .con-price {\r\n\t\t display: flex;\r\n\t\t align-items: center;\r\n\t }\r\n\r\n\t .now-price {\r\n\t\t width: 180upx;\r\n\t\t font-size: 33upx;\r\n\t\t color: #fb4e44;\r\n\t\t overflow: hidden;\r\n\t }\r\n\t .pre-price {\r\n\t\t text-decoration: line-through;\r\n\t }\r\n\t .goods-num {\r\n\t\t display: flex;\r\n\t\t align-items: center;\r\n\t\t justify-content: space-around;\r\n\t\t width: 100%;\r\n\t }\r\n\t .goods-num image {\r\n\t \twidth: 60upx;\r\n\t \theight: 60upx;\r\n\t }\r\n\t .goods-num .amount {\r\n\t\t width: 50upx;\r\n\t\t text-align: center;\r\n\t }\r\n\t \r\n\t /* 价格计算 */\r\n\t .calc-price {\r\n\t\t position: fixed;\r\n\t\t left: 0;\r\n\t\t right: 0;\r\n\t\t bottom: 0;\r\n\t\t width: 100%;\r\n\t }\r\n\t .rider {\r\n\t\t position: fixed;\r\n\t\t width: 120upx;\r\n\t\t height: 150upx;\r\n\t\t bottom: 0;\r\n\t\t left: 50upx;\r\n\t }\r\n\t .rider image {\r\n\t\t width: 100%;\r\n\t\t height: 100%;\r\n\t }\r\n\t .calc-price .number {\r\n\t\t position: fixed;\r\n\t\t bottom: 50upx;\r\n\t\t left: 130upx;\r\n\t\twidth: 40upx;\r\n\t\theight: 40upx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: red;\r\n\t\t\r\n\t\tline-height: 40upx;\r\n\t\tfont-size: 20upx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t }\r\n\t /* 金额计算 */\r\n\t .amount-detail {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\theight: 130upx;\r\n\t\tmargin: 0 20upx;\r\n\t }\r\n\t .detail-left {\r\n\t\t /* 占两份 */\r\n\t\t flex-grow: 2;\r\n\t\t height: 130upx;\r\n\t\t border-top-left-radius: 50upx;\r\n\t\t border-bottom-left-radius: 50upx;\r\n\t\t background: #000;\r\n\t }\r\n\t .detail-left .cost-amount {\r\n\t\t height: 130upx;\r\n\t\t padding-left: 170upx;\r\n\t\t color: #4CD964;\r\n\t }\r\n\t .cost-amount text {\r\n\t\t display: block;\r\n\t }\r\n\t .cost-amount .total-amount {\r\n\t\t height: 65upx;\r\n\t\t line-height: 65upx;\r\n\t\t font-size: 40upx;\r\n\t\t color: #fff;\r\n\t }\r\n\t .cost-amount .delivery {\r\n\t\t height: 65upx;\r\n\t\t font-size: 28upx;\r\n\t\t color: #999;\r\n\t }\r\n\t .detail-right {\r\n\t\t flex-grow: 1;\r\n\t\t height: 130upx;\r\n\t\t line-height: 130upx;\r\n\t\t border-top-right-radius: 50upx;\r\n\t\t border-bottom-right-radius: 50upx;\r\n\t\t \r\n\t\t background: #000;\r\n\t\t font-size: 30upx;\r\n\t\t text-align: center;\r\n\t\t color: #7f7f7f;\r\n\t}\r\n\t/* 选择菜单 */\r\n\t.dis-active {\r\n\t\tbackground: #7ccd7d!important;\r\n\t\tcolor: #000 !important;\r\n\t}\n</style>\n","import mod from \"-!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Goods.vue?vue&type=style&index=0&id=5bb53b4d&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\实训software\\\\HBuilderX\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Goods.vue?vue&type=style&index=0&id=5bb53b4d&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611495274634\n      var cssReload = require(\"D:/实训software/HBuilderX/HBuilderX.2.9.3.20201014.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}